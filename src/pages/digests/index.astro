---
import DigestPost from '../../components/DigestPost.astro';
import AboutBlock from '../../layouts/AboutBlock.astro';
import Layout from '../../layouts/Layout.astro';
import { CollectionEntry, getCollection } from 'astro:content';

const allDigest = await getCollection('digests');
const januaryDigest: CollectionEntry<'digests'>[] = allDigest
  .filter((post) => post.data.month === 'January')
  .reverse();
const februaryDigest: CollectionEntry<'digests'>[] = allDigest
  .filter((post) => post.data.month === 'February')
  .reverse();
---

<Layout title='digests' active='digests'>
  <main class='pt-24'>
    <div class='flex-col flex'>
      <AboutBlock title='February 2023'>
        {
          februaryDigest.map((post) => (
            <DigestPost link={post.slug} title={post.data.title} date={post.data.dates} />
          ))
        }
      </AboutBlock>
      <AboutBlock title='January 2023'>
        {
          januaryDigest.map((post) => (
            <DigestPost link={post.slug} title={post.data.title} date={post.data.dates} />
          ))
        }
      </AboutBlock>
    </div>
  </main>
</Layout>
